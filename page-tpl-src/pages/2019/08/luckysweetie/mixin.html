<!-- mixin html content -->
<div class="page-content">
    <!-- 礼物说明 -->
    <div class="gifts fl-box">
        <div class="pic-info">
            <div class="pic-i-price">
                <div class="txt-s per-a"></div>
                <div :class="'txt-s per-x' + per"></div>
                <div class="txt-s per-b"></div>
            </div>
        </div>
        <div class="txt-info"></div>
    </div>
    <!-- 开奖一览表 -->
    <div class="rw-list fl-box">
        <div v-once v-for="(gi, gind) in ['mmm', 'prxd', 'bx', 'wishes', 'cnst', 'plane', 'ship']" class="rw-i" :key="gi">
            <div :class="'rw-gift-price nums-s pirce_' + gind"></div>
            <div class="rw-gift-icon fl-box">
                <div :class="['gift-s', 'g-' + gi]"></div>
            </div>
            <div :class="['rw-gift-name txt-s', 'txt-' + gi]"></div>
        </div>
    </div>

    <div class="linear-wrapper">
        <!-- 当前进度 -->
        <div class="curr-stage fl-box">
            <div class="gift-icon">
                <div class="gift-wrapper fl-box">
                    <div :class="['gift-s', 'g-' + currTrophy.name]"></div>
                </div>
                <div :class="['gift-name txt-s', 'txt-' + currTrophy.name]"></div>
            </div>
            <div class="gift-num fl-ver">
                <div class="gift-s g-luky"></div>
                <div class="txt-s num-x"></div>
    
                <template>
                    <div v-for="ni in (trophyNum + '')" :class="'txt-s num' + ni"></div>
                </template>
                <div class="txt-s num-y"></div>
                <template>
                    <div v-for="ni in (currTrophy.needs + '')" :class="'txt-s num' + ni"></div>
                </template>
            </div>
        </div>
        <!-- 进度条 -->
        <div class="stage-prog">
            <div v-for="rp in progBlocks" class="icon-s prog-i"></div>
            <!-- <div v-for="rp in progBlocksB" class="icon-s prog-i1"></div> -->
        </div>
        <!-- 中奖公告栏 -->
        <div class="rw-board">
            <div class="rw-tab fl-box">
                <div :class="['icon-s clicker', rwTab === 1 ? 'open-a' : 'open']" @click="changeTab(1)"></div>
                <div :class="['icon-s clicker', rwTab === 2 ? 'record-a' : 'record']" @click="changeTab(2)"></div>
                <div :class="['icon-s clicker', rwTab === 3 ? 'sender-a' : 'sender']" @click="changeTab(3)"></div>
            </div>
            <div class="rw-content">
                <div :class="['thead', 'th-' + rwTab, 'fl-box']">
                    <div v-for="(tab, tabi) in rwTabMap[rwTab]" :class="'cell-' + (tabi+1)">
                        <div :class="tab"></div>
                    </div>
                </div>
                <scroller
                    :class="['tbody', 'tbody-' + rwTab]"
                    ref="rw-scroller"
                    :right="22"
                    :thumb-color="'#ff5470'">
                    <template v-if="rwTab === 1">
                        <div v-for="(tro, troi) in trophyList" :key="'tab_0_item_' + troi" class="t-row fl-box">
                            <div class="tcell cell-txt cell-1 txt-of">{{ tro.awardUser }}</div>
                            <div class="tcell cell-txt cell-2">
                                <div class="ticon gift-wrap">
                                    <img class="ticon-img" :src="tro.giftPic" alt="">
                                </div>
                            </div>
                            <div class="tcell cell-txt cell-3 txt-of" @click="goRoom(tro)">{{ tro.awardRoom }}</div>
                            <div class="tcell cell-txt cell-4 fl-box txt-of">
                                <div class="ticon g-luky-wrap"><div class="gift-s g-luky"></div></div>*{{ tro.giftNum }}
                            </div>
                            <div class="tcell cell-txt cell-5">{{ tro.time }}</div>
                        </div>
                        <div v-if="trophyList.length === 0" class="holder">{{ stage === 0 ? '活动暂未开始' : '送幸运糖果，赢经典帝王套，快快行动起来吧！' }}</div>
                    </template>
                    <template v-if="rwTab === 2">
                        <div v-for="(tro, troi) in trophyList" :key="'tab_1_item_' + troi" class="t-row fl-box">
                            <div class="tcell cell-txt cell-1">
                                <div class="ticon gift-wrap">
                                    <img class="ticon-img" :src="tro.giftPic" alt="">
                                </div>
                            </div>
                            <div class="tcell cell-txt cell-2 txt-of" @click="goRoom(tro)">{{ tro.awardRoom }}</div>
                            <div class="tcell cell-txt cell-3 fl-box txt-of">
                                <div class="ticon g-luky-wrap"><div class="gift-s g-luky"></div></div>*{{ tro.giftNum }}
                            </div>
                            <div class="tcell cell-txt cell-4">{{ tro.time }}</div>
                        </div>
                        <div v-if="trophyList.length === 0" class="holder">{{ stage === 0 ? '活动暂未开始' : '多试几次，你就是下一个幸运锦鲤！' }}</div>
                    </template>
                    <template v-if="rwTab === 3">
                        <div v-for="(tro, troi) in trophyList" :key="'tab_2_item_' + troi" class="t-row fl-box">
                            <div class="tcell cell-txt cell-1">
                                <div class="ticon gift-wrap">
                                    <!-- <div :class="['gift-s', 'g-' + 'king']"></div> -->
                                    <img class="ticon-img" :src="tro.giftPic" alt="">
                                </div>
                            </div>
                            <div class="tcell cell-txt cell-2 fl-box">
                                <div class="ticon g-luky-wrap"><div class="gift-s g-luky"></div></div>*{{ tro.giftNum }}
                            </div>
                            <div class="tcell cell-txt cell-3">{{ tro.time }}</div>
                        </div>
                        <div v-if="trophyList.length === 0" class="holder">{{ stage === 0 ? '活动暂未开始' : '送出即可赢大奖，你还在等什么！' }}</div>
                    </template>
                </scroller>
            </div>
        </div>
    </div>
    <!-- 幸运糖果榜 -->
    <div :class="['ranks', !ranks.meCenter && 'no-center']">
        <!-- 前三 -->
        <div class="top3">
            <div v-for="(ti, tind) in top3" :key="'top_i_' + tind" :class="'top-i top' + tind">
                <div class="headpic">
                    <div :class="['pic-s', 'bg-avatar-x' + tind, 'avatar-bg']">
                        <img v-if="ti" class="avatar" :src="ti.headPic" alt="" @click="goRoom(ti)">
                        <div v-else class="avatar-holder">虚位以待</div>
                    </div>
                    <div :class="'icon-s icon-cown cown' + tind"></div>
                    <div v-show="ti && ti.isPlaying" class="icon-s live"></div>
                </div>
                <div class="names fl-box">
                    <span class="nickname txt-of">{{ ti ? ti.nickname : '虚位以待' }}</span>
                    <span v-if="ti" :class="['level_icon m_level_icon_' + ti.level]"></span>
                </div>
                <p class="scores txt-of">收到: {{ ti ? ti.score : '--' }}</p>
                <div :class="['icon-s clicker btn-atte', (ti && (ti.isLoved || ti.id === mid)) ? 'atted' : 'atte']" @click="!(ti && (ti.isLoved || ti.id === mid)) && atte(ti)"></div>
            </div>
        </div>

        <!-- 剩余 -->
        <div class="rlist-th fl-ver">
            <div class="rlist-td tcell-1">
                <div class="txt-s txt-r-c1"></div>
            </div>
            <div class="rlist-td tcell-2">
                <div class="txt-s txt-r-c2"></div>
            </div>
            <div class="rlist-td tcell-3">
                <div class="txt-s txt-r-c3"></div>
            </div>
        </div>
        <div class="rlist">
            <div v-for="(ri, rind) in ranklists" :key="'rind_'+rind" class="rlist-tr fl-ver">
                <div class="rlist-td tcell-1">
                    <span v-for="ni in (rind + 4 + '')" :class="'txt-s num' + ni"></span>
                </div>
                <div class="rlist-td tcell-2 fl-ver">
                    <div class="headpic">
                        <div class="pic-s bg-avatar avatar-bg">
                            <img v-if="ri" class="avatar" :src="ri.headPic" alt="" @click="goRoom(ri)">
                            <div v-else class="avatar-holder">虚位以待</div>
                        </div>
                        <div v-show="ri && ri.isPlaying" class="icon-s live"></div>
                    </div>
                    <div class="nickname txt-of">{{ ri ? ri.nickname : '虚位以待' }}</div>
                    <span v-if="ri" :class="['level_icon m_level_icon_' + ri.level]"></span>
                </div>
                <div class="rlist-td tcell-3 txt-of">{{ ri ? ri.score : '--' }}</div>
            </div>
        </div>
        <p class="rtips">当前只展示前10名主播</p>
        <div v-if="ranks.meCenter" class="rcenter fl-box">
            <div class="brief">
                <div class="headpic">
                    <div class="pic-s bg-avatar-x3 avatar-bg"><img class="avatar" :src="ranks.meCenter.headPic" alt="" @click="goRoom(ranks.meCenter)"></div>
                    <div v-show="ranks.meCenter.isPlaying" class="icon-s live"></div>
                </div>
    
                <div class="name fl-box">
                    <div class="nickname txt-of">{{ ranks.meCenter.nickName }}</div>
                    <span :class="'level_icon m_level_icon_' + ranks.meCenter.level"></span>
                </div>
            </div>
            
            <div class="desc fl-box">
                <div v-for="di in [0, 2, 1, 3]" class="desc-i">
                    <div class="title" :data-name="ranks.meCenter.pairInfos[di].name">{{ ranks.meCenter.pairInfos[di].name }}</div>
                    <div class="value">{{ ranks.meCenter.pairInfos[di].value }}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- copyright -->
    <div class="txt-s txt-cp"></div>
</div>

<div class="floater clicker icon-s btn-rule" @click="toggleRule">活动规则</div>

<div v-show="layerRules" class="layer layer-rules">
    <div class="layer-inner">
        <div class="layer-close clicker icon-s btn-close" @click="toggleRule"></div>
        <div class="layer-masker"></div>
        <scroller
            class="layer-main"
            ref="rules-scroller"
            :right="4"
            :thumb-color="'#7c0097'">
            <div class="rule-1">
                <div :class="'rule-per txt-s per-x' + per + '-r'"></div>
                <div class="pic-info">
                    <div class="pic-i-price">
                        <div class="txt-s per-a"></div>
                        <div :class="'txt-s per-x' + per"></div>
                        <div class="txt-s per-b"></div>
                    </div>
                </div>
            </div>
            <div class="rule-2"></div>
            <div class="rule-3"></div>
        </scroller>
    </div>
</div>

<loading ref="loading"></loading>

<toast ref="toast"></toast>
<!-- mixin html content -->